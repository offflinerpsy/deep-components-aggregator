# üö® EMERGENCY RECOVERY INSTRUCTIONS

## –ü–†–û–ë–õ–ï–ú–ê
–°–µ—Ä–≤–µ—Ä 89.104.69.77 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
- ‚ùå SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå HTTP –ø–æ—Ä—Ç—ã (80, 443) –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç
- ‚ùå Node.js —Å–µ—Ä–≤–µ—Ä (9201) –Ω–µ –∑–∞–ø—É—â–µ–Ω
- ‚ùå NGINX –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω/–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –†–ï–®–ï–ù–ò–ï - –ö–û–ù–°–û–õ–¨ –ü–†–û–í–ê–ô–î–ï–†–ê

### 1. –ü–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Console/KVM
- –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ù–∞–π–¥–∏—Ç–µ –æ–ø—Ü–∏—é "Console" –∏–ª–∏ "KVM" –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ 89.104.69.77
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞

### 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
–í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –°–∫–∞—á–∞–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
wget -O emergency-recover-server.sh https://raw.githubusercontent.com/your-repo/emergency-recover-server.sh
chmod +x emergency-recover-server.sh
./emergency-recover-server.sh
```

**–ò–õ–ò** —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `emergency-recover-server.sh` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –¥–æ—Å—Ç—É–ø (—Å –≤–∞—à–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)
ssh -i ~/.ssh/id_ed25519_deploy root@89.104.69.77

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ HTTP –¥–æ—Å—Ç—É–ø
curl http://89.104.69.77/
curl http://89.104.69.77/ui/search.html
```

### 4. –ó–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –ø–æ SSH:

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
./emergency-secure-ssh.sh
```

## –ß–¢–û –î–ï–õ–ê–ï–¢ –°–ö–†–ò–ü–¢ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø

1. **–°–Ω–∏–º–∞–µ—Ç –±–∞–Ω Fail2Ban** - –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª IP
2. **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç—ã –≤ UFW** - 22 (SSH), 80 (HTTP), 443 (HTTPS)
3. **–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç SSH –∫–ª—é—á–∏** - –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
4. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç NGINX** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 80
5. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** - NGINX ‚Üí Node.js (9201)
6. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Node.js/PM2** - –ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è Node.js
7. **–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - deep-aggregator –Ω–∞ 127.0.0.1:9201
8. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫** - —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

## –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- ‚úÖ SSH –¥–æ—Å—Ç—É–ø –ø–æ –∫–ª—é—á—É: `ssh deep-prod`
- ‚úÖ HTTP —Å–∞–π—Ç: `http://89.104.69.77/`
- ‚úÖ API –ø–æ–∏—Å–∫–∞: `http://89.104.69.77/api/search?q=test`
- ‚úÖ Live –ø–æ–∏—Å–∫: `http://89.104.69.77/ui/search.html?q=1N4148`
- ‚úÖ SSE —Å—Ç—Ä–∏–º: —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏

## –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

1. **SSH –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
2. **HTTP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å NGINX: `systemctl status nginx`
3. **API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PM2: `pm2 status`
4. **–ü–æ—Ä—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ UFW: `ufw status`

## –ö–û–ù–¢–ê–ö–¢–´ –î–õ–Ø –ü–û–î–î–ï–†–ñ–ö–ò

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å Console/KVM - –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–º—É —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—É.
