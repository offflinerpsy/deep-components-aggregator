# Deep Components Aggregator

**–°—Ç–∞—Ç—É—Å**: üü¢ Production  
**–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã**: üéØ **Tech Lead Mode (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ)**

–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º (DigiKey, Mouser, TME, Farnell).

---

## üéØ Tech Lead Mode ‚Äî –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **—Å—Ç—Ä–æ–≥–æ–º Tech Lead —Ä–µ–∂–∏–º–µ**:

- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è: **PLAN ‚Üí CHANGES ‚Üí RUN ‚Üí VERIFY ‚Üí ARTIFACTS ‚Üí GIT**
- ‚úÖ –ù–µ—Ç try/catch –≤ –Ω–æ–≤–æ–º –∫–æ–¥–µ ‚Äî —Ç–æ–ª—å–∫–æ **guard clauses**
- ‚úÖ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `docs/_artifacts/<date>/` **–í–°–ï–ì–î–ê**
- ‚úÖ **Conventional Commits** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–º–∏—Ç–æ–≤
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –¥–æ–≥–∞–¥–æ–∫ ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏**: [`docs/TECH-LEAD-MODE.md`](docs/TECH-LEAD-MODE.md) ‚Üê **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ü–†–û–ß–¢–ï–ù–ò–Æ**

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env –∫–ª—é—á–∞–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:9201`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/opt/deep-agg/
‚îú‚îÄ‚îÄ server.js              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ package.json           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ .env.example           # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ SECURITY.md            # –ü–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ src/                   # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ integrations/      # –ö–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ search/            # –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ currency/          # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç
‚îÇ   ‚îú‚îÄ‚îÄ db/                # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ api/                   # Express routes
‚îÇ   ‚îú‚îÄ‚îÄ auth.js            # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ order.js           # –ó–∞–∫–∞–∑—ã
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ config/                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ passport.mjs       # –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ session.mjs        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ providers.mjs      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ frontend/              # UI (HTML/CSS/JS)
‚îú‚îÄ‚îÄ public/                # –°—Ç–∞—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ scripts/               # –£—Ç–∏–ª–∏—Ç–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ e2e/                   # E2E —Ç–µ—Å—Ç—ã (Playwright)
‚îÇ
‚îú‚îÄ‚îÄ data/                  # –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db/                # SQLite –±–∞–∑—ã
‚îÇ   ‚îú‚îÄ‚îÄ idx/               # –ü–æ–∏—Å–∫–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ corpus.json        # –ö–æ—Ä–ø—É—Å –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îú‚îÄ‚îÄ logs/                  # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ archive/           # –°—Ç–∞—Ä—ã–µ –æ—Ç—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api-references/    # API —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ configs/           # –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥–æ–≤ (nginx, systemd)
‚îÇ   ‚îú‚îÄ‚îÄ data/              # CSV/JSON –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ _artifacts/        # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ QUICK-START.md     # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îÇ   ‚îú‚îÄ‚îÄ CHANGELOG.md       # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ node_modules/          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≤ .gitignore)
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

```bash
npm start              # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
npm run dev            # –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
npm run smoke          # Smoke-—Ç–µ—Å—Ç—ã
npm run providers:check # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
npm test:e2e           # E2E —Ç–µ—Å—Ç—ã
```

## üì¶ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

- **DigiKey** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π (—Ç—Ä–µ–±—É–µ—Ç OAuth2)
- **Mouser** ‚Äî —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á
- **TME** ‚Äî —Ç—Ä–µ–±—É–µ—Ç credentials
- **Farnell** ‚Äî —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ `.env`:
```env
DIGIKEY_CLIENT_ID=...
DIGIKEY_CLIENT_SECRET=...
MOUSER_API_KEY=...
TME_TOKEN=...
FARNELL_API_KEY=...
```

## üåç –ü—Ä–æ–∫—Å–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Cloudflare WARP –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ DigiKey:
```env
HTTP_PROXY=http://127.0.0.1:25345
HTTPS_PROXY=http://127.0.0.1:25345
```

–¢–∞–π–º–∞—É—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤: ‚â§9.5s (proxy-mode limit 10s)

## üí∞ –í–∞–ª—é—Ç—ã

–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –æ—Ç –¶–ë –†–§ (–∫—ç—à 24—á):
- XML API: `https://www.cbr.ru/scripts/XML_daily.asp`
- –ù–∞—Ü–µ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `.env`: `MARKUP_PERCENT=15`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- OWASP ASVS 5.0 baseline
- –°–º. [SECURITY.md](SECURITY.md)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](docs/QUICK-START.md)
- [–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](docs/CHANGELOG.md)
- [API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤](docs/api-references/)
- [–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](docs/_artifacts/)

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–°–º. `docs/_artifacts/2025-10-06/risks.md`

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary (—Å–º. LICENSE)

–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –∂–∏–≤—ã–º –ø–æ–∏—Å–∫–æ–º, —Ä–æ—Ç–∞—Ü–∏–µ–π API-–∫–ª—é—á–µ–π –∏ —á–∞–Ω–∫–æ–≤—ã–º –∏–º–ø–æ—Ä—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ OAuth** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥ —Å email+–ø–∞—Ä–æ–ª—å, Google, Yandex; —Å–µ—Å—Å–∏–∏ –≤ SQLite; –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤
- **–ñ–∏–≤–æ–π –ø–æ–∏—Å–∫ (SSE)** - –ø–æ–∏—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Server-Sent Events
- **–†–æ—Ç–∞—Ü–∏—è API-–∫–ª—é—á–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π API –¥–ª—è —Å–∫—Ä–∞–ø–∏–Ω–≥–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤
- **HTML-–∫—ç—à** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ TTL –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π stale-if-error
- **–ß–∞–Ω–∫–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç** - –ø–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å URL'–∞–º–∏ (–¥–æ 1 GB) –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–∞–º—è—Ç—å
- **–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á —Å p-queue
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- **E2E —Ç–µ—Å—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Playwright
- **WARP Proxy Mode** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Cloudflare WARP –¥–ª—è –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- npm 9+
- Nginx (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-username/deep-aggregator-v2.git
cd deep-aggregator-v2

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
mkdir -p secrets/apis data/cache/html data/cache/meta data/db/products data/idx data/state logs/_diag loads/urls var/db

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API-–∫–ª—é—á–µ–π
echo "your-scraperapi-key" > secrets/apis/scraperapi.txt
echo "your-scrapingbee-key" > secrets/apis/scrapingbee.txt
echo "your-scrapingbot-key" > secrets/apis/scrapingbot.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–¥–ª—è OAuth)
export SESSION_SECRET=$(openssl rand -base64 32)
export GOOGLE_CLIENT_ID="your-google-client-id"
export GOOGLE_CLIENT_SECRET="your-google-secret"
export YANDEX_CLIENT_ID="your-yandex-client-id"
export YANDEX_CLIENT_SECRET="your-yandex-secret"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sqlite3 var/db/deepagg.sqlite < db/migrations/2025-10-02_orders.sql
sqlite3 var/db/deepagg.sqlite < db/migrations/2025-10-02_auth.sql

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
npm run rates:refresh

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
```

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞

```bash
# –ò–º–ø–æ—Ä—Ç URL'–æ–≤ ChipDip
npm run data:ingest:chipdip

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
npm run data:index:build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Smoke-—Ç–µ—Å—Ç—ã
npm run smoke

# E2E —Ç–µ—Å—Ç—ã
npm run test:e2e

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∂–∏–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
npm run diag:live "LM317"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ
npm run diag:report --dir _diag/2025-09-29T00-00-00-000Z
```

### –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –î–µ–ø–ª–æ–π –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
npm run deploy
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `src/` - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
  - `api/` - API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
  - `core/` - —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã (–ø–æ–∏—Å–∫, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∫–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏—è)
  - `currency/` - —Ä–∞–±–æ—Ç–∞ —Å –≤–∞–ª—é—Ç–∞–º–∏
  - `db/` - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
  - `live/` - –∂–∏–≤–æ–π –ø–æ–∏—Å–∫
  - `parsers/` - –ø–∞—Ä—Å–µ—Ä—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
  - `scrape/` - —Å–∫—Ä–∞–ø–∏–Ω–≥ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- `scripts/` - —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á
- `tests/` - —Ç–µ—Å—Ç—ã
- `public/` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- `data/` - –¥–∞–Ω–Ω—ã–µ (–∫—ç—à, –∏–Ω–¥–µ–∫—Å—ã, –ø—Ä–æ–¥—É–∫—Ç—ã)
- `secrets/` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (API-–∫–ª—é—á–∏)
- `logs/` - –ª–æ–≥–∏
- `_diag/` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- `_reports/` - –æ—Ç—á–µ—Ç—ã

## API

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- `POST /auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /auth/login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /auth/logout` - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `GET /auth/me` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `GET /auth/google` - OAuth –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Google
- `GET /auth/yandex` - OAuth –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å

### –ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

- `GET /api/user/orders` - —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã)
- `GET /api/user/orders/:id` - –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
- `POST /api/order` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

### –ü–æ–∏—Å–∫

- `GET /api/search?q=<query>` - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
- `GET /api/live/search?q=<query>` - –∂–∏–≤–æ–π –ø–æ–∏—Å–∫ —Å SSE

### –ü—Ä–æ–¥—É–∫—Ç—ã

- `GET /api/product?mpn=<mpn>` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–¥—É–∫—Ç–µ –ø–æ MPN
- `GET /api/product?url=<url>` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–¥—É–∫—Ç–µ –ø–æ URL

### –°–∏—Å—Ç–µ–º–Ω—ã–µ

- `GET /api/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- `GET /api/metrics` - Prometheus –º–µ—Ç—Ä–∏–∫–∏

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞—â–∏—â–µ–Ω–æ Nginx Basic Auth)

- `GET /api/admin/orders` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã)
- `GET /api/admin/orders/:id` - –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
- `PATCH /api/admin/orders/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `docs/API.md`, `docs/SECURITY.md`, `docs/OPERATIONS.md`

---

## Engineering Policies

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞.

### üìã –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–º–º–∏—Ç–æ–≤ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

- **[Conventional Commits](https://www.conventionalcommits.org/)**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤ (`type(scope): description`)
  - –¢–∏–ø—ã: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`
  - –ü—Ä–∏–º–µ—Ä—ã: `feat(search): add Russian normalization`, `fix(api): validate product MPN`

- **[Semantic Versioning 2.0.0](https://semver.org/)**: `MAJOR.MINOR.PATCH`
  - MAJOR: breaking changes
  - MINOR: –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
  - PATCH: –±–∞–≥—Ñ–∏–∫—Å—ã

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **[12-Factor App](https://12factor.net/)**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è SaaS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - Stateless –ø—Ä–æ—Ü–µ—Å—Å—ã
  - –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (package.json, requirements.txt)
  - Dev ‚âà Prod (–æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö)

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[OpenAPI Specification](https://spec.openapis.org/oas/latest.html)**: –û–ø–∏—Å–∞–Ω–∏–µ HTTP API (OAS 3.x)
- **Architecture Decision Records (ADR)**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –≤ `docs/adr/`

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **[Test Pyramid](https://martinfowler.com/articles/practical-test-pyramid.html)**: –ë–∞–ª–∞–Ω—Å —Ç–∏–ø–æ–≤ —Ç–µ—Å—Ç–æ–≤
  - Unit —Ç–µ—Å—Ç—ã (70-80%): –±—ã—Å—Ç—Ä—ã–µ, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
  - Integration —Ç–µ—Å—Ç—ã (15-20%): –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–æ–∫
  - E2E/UI —Ç–µ—Å—Ç—ã (5-10%): –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `docs/_artifacts/<date>/`

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **[OWASP ASVS 5.0](https://github.com/OWASP/ASVS)**: Baseline —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **[OWASP Top-10](https://owasp.org/www-project-top-ten/)**: –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏ code review
- **–°–µ–∫—Ä–µ—Ç—ã**: –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ —Å–µ–∫—Ä–µ—Ç-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–Ω–µ –≤ –∫–æ–¥–µ!)

### üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **[EditorConfig](https://editorconfig.org/)**: –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ (`.editorconfig`)
- **VS Code Settings**: –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, LF –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∫, 2 –ø—Ä–æ–±–µ–ª–∞ –æ—Ç—Å—Ç—É–ø

### üìñ Workspace Instructions

–í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤/Copilot –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `.github/copilot-instructions.md`.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
