# Product Card Redesign — Анализ макета из `components-aggregator (1).zip`

## Источники
- Архив: `/opt/deep-agg/temp/designs/components-aggregator.zip`
- Макет страницы: `temp/designs/app/product/[id]/page.tsx`
- Инструкции макета: `temp/designs/PRODUCT_CARD_REDESIGN_INSTRUCTIONS.md`
- Текущая страница фронта: `v0-components-aggregator-page/app/product/[mpn]/page.tsx`

## Ключевые требования макета
1. **Сетка 12 колонок (3-5-4) на десктопе**: изображение (3), информация (5), покупка (4).
2. **Галерея**: квадратная основная картинка с паддингом и миниатюрами, переключение по клику и hover, fallback на плейсхолдер.
3. **Инфо-блок**: название (line clamp 3), производитель, описание, inline PDF-бейджи после бордера.
4. **Покупка**: compact блок, sticky, лучшая цена, наличие с индикатором, контрол +/- с узким numeric input, «Купить», списки регионов.
5. **Табы**: только «Характеристики» и «Предложения», содержимое min-h для стабилизации высоты.
6. **Документы**: выводятся в инфо-блоке, не в табах.
7. **Мобильная адаптация**: вертикальный стек; тщательно подобранные размеры кнопок.

## Текущее состояние в репозитории
- Сетка: `lg:grid-cols-12`, но фактическое распределение `3-6-3`; нужно перенастроить ширины согласно макету.
- Галерея: есть square, но fallback через скрытый div; нужно выровнять с макетом (border, ring, hover).
- Инфо-блок: уже выводит pdf, описание, но отсутствуют border/padding-композиции и line-clamp.
- Документы: выводятся и в табах (третий таб «Документы») — требуется удалить таб и оставить inline.
- Покупка: блок не sticky, оформление отличается (muted, нет компактного quantity контроллера с border-sides, отсутствует блок регионов).
- Регионов/цен: реальные данные приходят с API (`product.pricing`, `product.regions` и т.д.), требуется интегрировать макет поверх реальных полей, без возвращения к мокам.

## План синхронизации с реальными данными
- Использовать существующий объект `product` (из API) и derived helpers (`calculateBestPrice`, `formatRub`, `formatStock`, `deriveOffers`).
- Заменить разметку карточек на макетные блоки, но заполнение — только данными API: `product.images`, `product.datasheets`, `product.pricing`, `product.availability`, `product.regions`.
- В контроле количества сохранить локальный state `quantity` (уже есть), привести оформление к макету.
- Реализовать sticky через `sticky top-24` (учесть высоту header).
- Вернуть компактность: тонкие бордеры, белый фон, text-xs/line-clamp, badge стили.

## Открытые вопросы
- В макете кнопка «Купить» — в текущей логике переходов нет (кнопка сейчас «Добавить в список»/другое). Согласно инструкции, оставить «Купить» как стилизованную кнопку без функционала (принимаем).
- Региональные бейджи: в данных возможно много элементов → предусмотреть wrap и ограничение ширины.
- Sticky при мобильной версии: нужно отключать на <lg (`lg:sticky lg:top-24`).

## Следующие шаги
1. Перенести макетную структуру в `v0-components-aggregator-page/app/product/[mpn]/page.tsx` с адаптацией к реальным данным.
2. Обновить стили галереи/инфо/покупки/табов.
3. Удалить таб документов и сопутствующий код.
4. Проверить адаптивность вручную/через snapshots.
5. Собрать build и зафиксировать артефакты.
