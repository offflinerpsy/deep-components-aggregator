# üêõ –ò–°–ü–†–ê–í–õ–ï–ù–û: "date.includes is not a function" –≤ AdminJS

**–î–∞—Ç–∞**: 24 –æ–∫—Ç—è–±—Ä—è 2025, 15:35 MSK  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É https://prosnab.tech/admin

---

## üéØ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê

AdminJS –ø—ã—Ç–∞–ª—Å—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å **—Å—Ç—Ä–æ–∫–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä** `.includes()` –∫ –ø–æ–ª—é `read_at` —Ç–∏–ø–∞ **BIGINT** (timestamp) –≤ —Ä–µ—Å—É—Ä—Å–µ AdminNotification.

### –ö–æ–¥ –ø—Ä–æ–±–ª–µ–º—ã:

```javascript
{
  resource: AdminNotification,
  options: {
    filterProperties: ['type', 'read_at'], // ‚ùå read_at —ç—Ç–æ BIGINT!
    ...
  }
}
```

### –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∞—Ö:

```
[AdminJS]: There is no property of the name: "created_at". 
Check out the "showProperties" in the resource: "settings"
```

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –±—ã–ª–∞ –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π - —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ `read_at` —Ñ–∏–ª—å—Ç—Ä–µ –¥–ª—è AdminNotification.

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

**–§–∞–π–ª**: `/opt/deep-agg/src/admin/index.mjs`

**–ò–∑–º–µ–Ω–µ–Ω–æ**:
```javascript
// –î–û:
filterProperties: ['type', 'read_at']

// –ü–û–°–õ–ï:
filterProperties: ['type']
```

**–ü—Ä–∏—á–∏–Ω–∞**: `read_at` —ç—Ç–æ —á–∏—Å–ª–æ–≤–æ–µ –ø–æ–ª–µ (BIGINT timestamp), AdminJS –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –Ω–µ–º—É —Å—Ç—Ä–æ–∫–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä `.includes()`.

---

## üß™ –ü–†–û–í–ï–†–ö–ê

### 1. –õ–æ–≥–∏ —á–∏—Å—Ç—ã–µ:

```bash
tail -50 logs/err.log | grep -i "date.includes"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—É—Å—Ç–æ (–æ—à–∏–±–∫–∏ –±–æ–ª—å—à–µ –Ω–µ—Ç)
```

### 2. –ê–¥–º–∏–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞:

```bash
curl -I https://prosnab.tech/admin
# HTTP/2 302 (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω - –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
```

### 3. –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç:

**–õ–æ–≥–∏–Ω**: https://prosnab.tech/admin

```
Email:    admin@prosnab.tech
–ü–∞—Ä–æ–ª—å:   admin123
```

‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –±–µ–∑ –æ—à–∏–±–æ–∫!

---

## üìã –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

| –ö–æ–º–º–∏—Ç | –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|----------|---------|
| `3bbb4a6` | `created_at` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Settings | –£–±—Ä–∞–Ω–æ –∏–∑ showProperties ‚úÖ |
| `3bbb4a6` | `meta` –Ω–µ –≤–∏–¥–Ω–æ –≤ Orders | –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ showProperties ‚úÖ |
| **–ù–û–í–´–ô** | **`date.includes` –≤ AdminNotification** | **–£–±—Ä–∞–Ω–æ `read_at` –∏–∑ filterProperties ‚úÖ** |

---

## üîç –ü–û–ß–ï–ú–£ –û–®–ò–ë–ö–ê –ë–´–õ–ê –°–ö–†–´–¢–ê

AdminJS –ø–æ–∫–∞–∑—ã–≤–∞–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ `created_at` –≤ Settings, –Ω–æ —ç—Ç–æ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–æ —Ä–∞–±–æ—Ç—É. **–†–µ–∞–ª—å–Ω–∞—è** –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ—à–∏–±–∫–∞ –±—ã–ª–∞ –≤ `read_at` —Ñ–∏–ª—å—Ç—Ä–µ AdminNotification - –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–ª–∞ –∫—Ä–∞—à –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Ä–µ–Ω–¥–µ—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤.

---

## üöÄ –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–ï

```bash
cd /opt/deep-agg
# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: src/admin/index.mjs (—Å—Ç—Ä–æ–∫–∞ 97)
pm2 restart deep-agg
# –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ: 24.10.2025 15:32 MSK
```

**–°—Ç–∞—Ç—É—Å**:
```
‚úÖ deep-agg    online    (restart #1796)
‚úÖ AdminJS database connected
‚úÖ Server Started
```

---

## ‚ö° –ò–¢–û–ì

| –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| –û—à–∏–±–∫–∞ "date.includes is not a function" | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –≤–∏–¥–Ω—ã | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ñ–∏–∫—Å–∞) |
| Settings –±–µ–∑ –æ—à–∏–±–æ–∫ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ñ–∏–∫—Å–∞) |

---

**–¢–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!** üéâ

---

**–ê–≤—Ç–æ—Ä**: GitHub Copilot  
**–ö–æ–º–º–∏—Ç**: –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º
