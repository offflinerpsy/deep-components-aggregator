# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ prosnab.tech –≤ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç

## üéØ –¶–µ–ª—å
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç –¥–ª—è –¥–æ–º–µ–Ω–∞ `prosnab.tech`, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–∞ –æ—Ç `alex@prosnab.tech` —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å SMTP relay.

---

## üìù –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç

### 1.1 –û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
üëâ https://connect.yandex.ru/

### 1.2 –ù–∞–∂–º–∏ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é"

### 1.3 –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É:
- **–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**: –û–û–û "–ü—Ä–æ—Å–Ω–∞–±" (–∏–ª–∏ –ª—é–±–æ–µ)
- **Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**: —Ç–≤–æ–π —Ç–µ–∫—É—â–∏–π email –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **–°–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏**: –ø–æ—Å—Ç–∞–≤—å –≥–∞–ª–æ—á–∫—É

### 1.4 –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ email
–Ø–Ω–¥–µ–∫—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–∏—Å—å–º–æ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π email ‚Äî –ø–µ—Ä–µ–π–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ.

---

## üìù –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ prosnab.tech

### 2.1 –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–∫—Ä–æ–π:
üëâ https://admin.yandex.ru/domains/

### 2.2 –ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω"

### 2.3 –í–≤–µ–¥–∏: `prosnab.tech`

### 2.4 –í—ã–±–µ—Ä–∏ —Å–ø–æ—Å–æ–± –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–ª–∞–¥–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º:

---

## ‚úÖ –°–ø–æ—Å–æ–± 1: DNS TXT-–∑–∞–ø–∏—Å—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

**–Ø–Ω–¥–µ–∫—Å –ø–æ–∫–∞–∂–µ—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ**:
```
–î–æ–±–∞–≤—å—Ç–µ TXT-–∑–∞–ø–∏—Å—å –≤ DNS:
–ò–º—è: @
–ó–Ω–∞—á–µ–Ω–∏–µ: yandex-verification: 1234567890abcdef
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤ DNS Timeweb:

1. **–û—Ç–∫—Ä–æ–π –ø–∞–Ω–µ–ª—å Timeweb**: https://timeweb.com/my/
2. **–ü–µ—Ä–µ–π–¥–∏**: –î–æ–º–µ–Ω—ã ‚Üí prosnab.tech ‚Üí DNS –∑–∞–ø–∏—Å–∏
3. **–ù–∞–∂–º–∏**: "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"
4. **–ó–∞–ø–æ–ª–Ω–∏**:
   - **–¢–∏–ø**: TXT
   - **–ò–º—è**: @ (–∏–ª–∏ –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º)
   - **–ó–Ω–∞—á–µ–Ω–∏–µ**: `yandex-verification: 1234567890abcdef` (—Å–∫–æ–ø–∏—Ä—É–π –∏–∑ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç)
   - **TTL**: 3600 (–∏–ª–∏ –æ—Å—Ç–∞–≤—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
5. **–°–æ—Ö—Ä–∞–Ω–∏**

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
–ñ–¥–∏ 5-15 –º–∏–Ω—É—Ç, –ø–æ—Ç–æ–º –≤ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç –Ω–∞–∂–º–∏ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"**

---

## ‚úÖ –°–ø–æ—Å–æ–± 2: HTML-—Ñ–∞–π–ª –Ω–∞ —Å–∞–π—Ç–µ

**–Ø–Ω–¥–µ–∫—Å –¥–∞—Å—Ç —Ñ–∞–π–ª**:
```
–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª yandex_1234567890abcdef.html
–ø–æ –∞–¥—Ä–µ—Å—É: https://prosnab.tech/yandex_1234567890abcdef.html
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å:

```bash
# –°–∫–∞—á–∞–π —Ñ–∞–π–ª —Å –Ø–Ω–¥–µ–∫—Å–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–π –≤—Ä—É—á–Ω—É—é:
cd /opt/deep-agg/public
echo '<html><head><meta name="yandex-verification" content="1234567890abcdef" /></head></html>' > yandex_1234567890abcdef.html

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –¥–æ—Å—Ç—É–ø–µ–Ω:
curl https://prosnab.tech/yandex_1234567890abcdef.html
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
–í –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç –Ω–∞–∂–º–∏ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"**

---

## ‚úÖ –°–ø–æ—Å–æ–± 3: Meta-—Ç–µ–≥ –≤ HTML

**–Ø–Ω–¥–µ–∫—Å –¥–∞—Å—Ç —Ç–µ–≥**:
```html
<meta name="yandex-verification" content="1234567890abcdef" />
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å:

–î–æ–±–∞–≤—å –≤ `<head>` –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∞–π—Ç–∞:
```html
<!-- –í —Ñ–∞–π–ª–µ frontend/app/layout.tsx –∏–ª–∏ index.html -->
<head>
  ...
  <meta name="yandex-verification" content="1234567890abcdef" />
  ...
</head>
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
–û—Ç–∫—Ä–æ–π https://prosnab.tech –∏ –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–µ–≥ –µ—Å—Ç—å –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ, –∑–∞—Ç–µ–º –≤ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç –Ω–∞–∂–º–∏ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"**

---

## üìù –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MX-–∑–∞–ø–∏—Å–µ–π (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–æ **–∑–∞–º–µ–Ω–∏—Ç** —Ç–≤–æ–π —Ç–µ–∫—É—â–∏–π mailcow –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä!

**–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Ç–æ–ª—å–∫–æ relay** ‚Üí **–ù–ï –ú–ï–ù–Ø–ô MX –∑–∞–ø–∏—Å–∏**, –ø—Ä–æ–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç —à–∞–≥.

**–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–µ—Ä–µ–µ—Ö–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é**:

1. **–£–¥–∞–ª–∏ —Ç–µ–∫—É—â—É—é MX**:
   ```
   MX 10 mail.prosnab.tech
   ```

2. **–î–æ–±–∞–≤—å MX –Ø–Ω–¥–µ–∫—Å–∞**:
   ```
   MX 10 mx.yandex.net.
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞**: `dig +short MX prosnab.tech`

---

## üìù –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ —è—â–∏–∫–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

### 4.1 –û—Ç–∫—Ä–æ–π:
üëâ https://admin.yandex.ru/users/

### 4.2 –ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"

### 4.3 –°–æ–∑–¥–∞–π —è—â–∏–∫–∏:

**–Ø—â–∏–∫ 1: alex@prosnab.tech**
- –õ–æ–≥–∏–Ω: `alex`
- –ò–º—è: Alex
- –§–∞–º–∏–ª–∏—è: Prosnab
- –ü–∞—Ä–æ–ª—å: –ø—Ä–∏–¥—É–º–∞–π —Å–ª–æ–∂–Ω—ã–π (–∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π)

**–Ø—â–∏–∫ 2: noreply@prosnab.tech** (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∏—Å–µ–º)
- –õ–æ–≥–∏–Ω: `noreply`
- –ò–º—è: NoReply
- –§–∞–º–∏–ª–∏—è: Prosnab
- –ü–∞—Ä–æ–ª—å: –ø—Ä–∏–¥—É–º–∞–π —Å–ª–æ–∂–Ω—ã–π

### 4.4 –°–æ–∑–¥–∞–π –ø–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ —è—â–∏–∫–∞**:

1. –û—Ç–∫—Ä–æ–π: https://id.yandex.ru/security/app-passwords
2. –í–æ–π–¥–∏ –∫–∞–∫ `alex@prosnab.tech` (–∏–ª–∏ –¥—Ä—É–≥–æ–π)
3. –ù–∞–∂–º–∏ **"–°–æ–∑–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"**
4. –í—ã–±–µ—Ä–∏ **"–ü–æ—á—Ç–∞"**
5. –ù–∞–∑–æ–≤–∏: "Mailcow SMTP Relay"
6. **–°–ö–û–ü–ò–†–£–ô –ø–∞—Ä–æ–ª—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `abcd efgh ijkl mnop`)
7. **–£–ë–ï–†–ò –ø—Ä–æ–±–µ–ª—ã**: `abcdefghijklmnop`

---

## üìù –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ mailcow credentials

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å alex@prosnab.tech

```bash
# –û–±–Ω–æ–≤–∏—Ç—å credentials –≤ mailcow
docker exec mailcowdockerized-postfix-mailcow-1 bash -c "cat > /opt/postfix/conf/smarthost_passwd << 'EOF'
smtp.yandex.ru:587 alex@prosnab.tech:–ü–ê–†–û–õ–¨_–ü–†–ò–õ–û–ñ–ï–ù–ò–Ø_–ë–ï–ó_–ü–†–û–ë–ï–õ–û–í
EOF
postmap /opt/postfix/conf/smarthost_passwd
chmod 600 /opt/postfix/conf/smarthost_passwd*"

# –û–±–Ω–æ–≤–∏—Ç—å sender_canonical –¥–ª—è –ù–ï –∑–∞–º–µ–Ω—ã From:
docker exec mailcowdockerized-postfix-mailcow-1 bash -c "cat > /opt/postfix/conf/sender_canonical << 'EOF'
# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ù–ï –º–µ–Ω—è—Ç—å sender, —Ç.–∫. –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ø–Ω–¥–µ–∫—Å
# –û—Å—Ç–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–º –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ä–æ–µ –ø—Ä–∞–≤–∏–ª–æ
EOF"

# Restart postfix
cd /opt/mailcow-dockerized
docker compose restart postfix-mailcow
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å noreply@prosnab.tech (–¥–ª—è –≤—Å–µ—Ö –ø–∏—Å–µ–º)

```bash
# Credentials
docker exec mailcowdockerized-postfix-mailcow-1 bash -c "cat > /opt/postfix/conf/smarthost_passwd << 'EOF'
smtp.yandex.ru:587 noreply@prosnab.tech:–ü–ê–†–û–õ–¨_–ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
EOF
postmap /opt/postfix/conf/smarthost_passwd
chmod 600 /opt/postfix/conf/smarthost_passwd*"

# Sender canonical –¥–ª—è –∑–∞–º–µ–Ω—ã –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π –Ω–∞ noreply
docker exec mailcowdockerized-postfix-mailcow-1 bash -c "cat > /opt/postfix/conf/sender_canonical << 'EOF'
# –í—Å–µ –ø–∏—Å—å–º–∞ –∏–¥—É—Ç –æ—Ç noreply@prosnab.tech
/^.*@prosnab\.tech$/ noreply@prosnab.tech
EOF"

# Restart postfix
cd /opt/mailcow-dockerized
docker compose restart postfix-mailcow
```

---

## üìù –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ
swaks --to offflinerpsy@gmail.com \
      --from alex@prosnab.tech \
      --server mail.prosnab.tech:587 \
      --tls \
      --auth LOGIN \
      --auth-user alex@prosnab.tech \
      --auth-password 123asd \
      --header "Subject: Test from Yandex Connect domain" \
      --body "This email sent from alex@prosnab.tech via Yandex Connect"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs mailcowdockerized-postfix-mailcow-1 --tail 20 | grep -E "status=|relay="
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```
relay=smtp.yandex.ru[77.88.21.158]:587
status=sent (250 2.0.0 Ok: queued)
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –î–æ–º–µ–Ω prosnab.tech –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–ª–∞–¥–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º –ø—Ä–æ–π–¥–µ–Ω–æ (TXT/HTML/meta)
- [ ] –°–æ–∑–¥–∞–Ω —è—â–∏–∫ alex@prosnab.tech (–∏–ª–∏ –¥—Ä—É–≥–æ–π)
- [ ] –°–æ–∑–¥–∞–Ω –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —è—â–∏–∫–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã credentials –≤ mailcow (smarthost_passwd)
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω sender_canonical (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] Postfix –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Domain not verified"
**–†–µ—à–µ–Ω–∏–µ**: –ñ–¥–∏ 5-30 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è DNS –∑–∞–ø–∏—Å–∏, –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –≤ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "535 Authentication failed"
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π **–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**, –Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å –æ—Ç —è—â–∏–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "550 Sender address rejected"
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Å—å —á—Ç–æ –¥–æ–º–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω –≤ –Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç –∏ `From:` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —è—â–∏–∫–æ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ü–∏—Å—å–º–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
**–ü—Ä–æ–≤–µ—Ä—å**:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å relay –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
docker exec mailcowdockerized-postfix-mailcow-1 postconf relayhost

# 2. –ü—Ä–æ–≤–µ—Ä—å credentials
docker exec mailcowdockerized-postfix-mailcow-1 cat /opt/postfix/conf/smarthost_passwd

# 3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
docker logs mailcowdockerized-postfix-mailcow-1 --tail 50 | grep -i error
```

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–Ø–Ω–¥–µ–∫—Å –ö–æ–Ω–Ω–µ–∫—Ç**: https://connect.yandex.ru/
- **–ê–¥–º–∏–Ω–∫–∞ –Ø–Ω–¥–µ–∫—Å**: https://admin.yandex.ru/
- **–ü–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**: https://id.yandex.ru/security/app-passwords
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å**: https://yandex.ru/support/connect/

---

**–î–∞—Ç–∞**: 2025-11-12  
**–ê–≤—Ç–æ—Ä**: GitHub Copilot  
**–í—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: 15-30 –º–∏–Ω—É—Ç
