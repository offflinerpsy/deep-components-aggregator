<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Deep Aggregator — Поиск электронных компонентов</title>
  <style>
    /* ========================
       DESIGN TOKENS (Light)
       ======================== */
    :root{
      /* Color */
      --bg: #fafafa;
      --surface: #ffffff;
      --surface-2: #f5f7fb;
      --text: #111827;         /* gray-900 */
      --muted: #6b7280;        /* gray-500 */
      --stroke: #e5e7eb;       /* gray-200 */
      --primary: #1d4ed8;      /* blue-700 (good contrast on white) */
      --primary-weak: #dbeafe; /* blue-100 */
      --success: #16a34a;      /* green-600 */
      --warn: #ea580c;         /* orange-600 */
      --danger: #dc2626;       /* red-600 */

      /* Shape (Material-esque scale) */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;

      /* Elevation (subtle) */
      --shadow-1: 0 1px 2px rgba(0,0,0,.06), 0 1px 1px rgba(0,0,0,.04);
      --shadow-2: 0 4px 16px rgba(0,0,0,.08);
      --shadow-3: 0 8px 24px rgba(0,0,0,.10);

      /* Motion */
      --easing-standard: cubic-bezier(.2, 0, 0, 1); /* snappy start, soft end */
      --easing-emphasis: cubic-bezier(.05, .7, .1, 1);
      --motion-fast: 150ms;
      --motion-mid: 220ms;
      --motion-slow: 320ms;

      /* Typography */
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      --fs-1: clamp(22px, 2vw, 28px); /* H1 */
      --fs-2: clamp(18px, 1.6vw, 22px); /* H2 */
      --fs-body: 16px;
    }

    /* Reduced motion: keep it gentle */
    @media (prefers-reduced-motion: reduce){
      * { animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 1ms !important; }
    }

    html,body{height:100%;}
    body{
      margin:0; background:var(--bg); color:var(--text); font-family:var(--font);
      -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
    }

    /* ============ LAYOUT ============ */
    .container{max-width:1100px; margin-inline:auto; padding:24px;}
    header{position:sticky; top:0; backdrop-filter:saturate(1.2) blur(6px); background:rgba(250,250,250,.75); border-bottom:1px solid var(--stroke); z-index:10}
    .topbar{display:flex; align-items:center; gap:16px; padding:14px 24px;}

    .brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px; text-decoration:none; color:var(--text)}
    .logo{width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,var(--primary),#0ea5e9); box-shadow:var(--shadow-1)}

    nav{margin-left:auto; display:flex; align-items:center; gap:12px}
    nav a{color:var(--muted); text-decoration:none; padding:8px 12px; border-radius:999px; transition:color var(--motion-fast) var(--easing-standard), background var(--motion-fast) var(--easing-standard)}
    nav a:hover{color:var(--text); background:var(--surface-2)}
    nav .btn-login{color:var(--primary); font-weight:600; border:1px solid var(--primary); padding:8px 16px}
    nav .btn-login:hover{background:var(--primary-weak); color:var(--primary)}
    nav .btn-register{background:var(--primary); color:white; font-weight:600; padding:8px 16px; border:none}
    nav .btn-register:hover{filter:brightness(0.95)}
    nav .user-menu{color:var(--text); font-weight:600}
    nav .user-menu:hover{color:var(--primary)}

    /* Search pill */
    .search{display:flex; align-items:center; gap:10px; flex:1; max-width:560px; padding:10px 14px; border:1px solid var(--stroke); background:var(--surface); border-radius:999px; box-shadow:var(--shadow-1); transition: box-shadow var(--motion-mid) var(--easing-standard), border-color var(--motion-fast) var(--easing-standard)}
    .search:focus-within{box-shadow:var(--shadow-2); border-color:#bfdbfe}
    .search input{flex:1; font-size:15px; border:none; outline:none; background:transparent; color:var(--text)}
    .search button{border:none; background:var(--primary); color:white; padding:10px 16px; border-radius:999px; font-weight:600; cursor:pointer; transition:transform var(--motion-fast) var(--easing-emphasis), filter var(--motion-fast) var(--easing-standard)}
    .search button:hover{filter:brightness(.95)}
    .search button:active{transform:translateY(1px) scale(.99)}
    .search svg{width:18px; height:18px; color:var(--muted)}

    main{padding:24px;}

    /* Hero */
    .hero{text-align:center; margin:48px 0; max-width:800px; margin-inline:auto}
    .hero h1{font-size:var(--fs-1); margin:0 0 10px; font-weight:400}
    .hero p{color:var(--muted); margin:0 0 32px; font-size:17px}

    .chip{display:inline-flex; align-items:center; gap:8px; background:var(--primary-weak); color:#1e3a8a; border-radius:999px; padding:6px 10px; font-weight:600; font-size:12px; margin:4px}

    /* Focus styles */
    a:focus-visible, button:focus-visible, input:focus-visible{ outline: 3px solid #93c5fd; outline-offset: 2px; border-radius:6px }

    /* Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-in { animation: fadeInUp 0.6s var(--easing-standard) forwards; }
    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.2s; }

    footer{color:var(--muted); padding:40px 24px; text-align:center; border-top:1px solid var(--stroke); margin-top:60px}
  </style>
</head>
<body>
  <header>
    <div class="topbar container">
      <a href="/" class="brand"><div class="logo" aria-hidden="true"></div> Deep Aggregator</a>
      <nav>
        <a href="/">Главная</a>
        <a href="/search.html">Поиск</a>
        <a href="/ui/sources.html">Источники</a>
        <a href="/ui/about.html">О нас</a>
        <span id="auth-nav"></span>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1 class="animate-in">Лёгкий Hi‑Fi интерфейс для поиска компонентов</h1>
      <p class="animate-in delay-1">Современная типографика, округлые формы, мягкие тени и аккуратная анимация. Быстро. Чисто. Понятно.</p>
      
      <form class="search animate-in delay-2" role="search" aria-label="Поиск компонентов" action="/search.html" method="get">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        <input name="q" placeholder="MPN, например LM317T" autocomplete="off" />
        <button type="submit">Искать</button>
      </form>

      <div style="margin-top:24px" class="animate-in delay-2">
        <span class="chip">≤ 220ms анимации</span>
        <span class="chip">Контраст AA</span>
        <span class="chip">Фокус видимый</span>
      </div>
    </section>
  </main>

  <footer class="container">© 2025 Deep Components Aggregator</footer>
  
  <script>
    // Check auth status and update nav
    (async function() {
      try {
        const authResponse = await fetch('/auth/me');
        const authNav = document.getElementById('auth-nav');
        
        if (authResponse.ok) {
          const user = await authResponse.json();
          authNav.innerHTML = `
            <a href="/ui/my-orders.html">Мои заказы</a>
            <a href="#" class="user-menu" onclick="logout(event)">${user.name || user.email || 'Профиль'} ↓</a>
          `;
        } else {
          authNav.innerHTML = `
            <a href="/ui/auth.html" class="btn-login">Вход</a>
            <a href="/ui/auth.html?tab=register" class="btn-register">Регистрация</a>
          `;
        }
      } catch (err) {
        // Silent fail - auth is optional
        const authNav = document.getElementById('auth-nav');
        authNav.innerHTML = `
          <a href="/ui/auth.html" class="btn-login">Вход</a>
          <a href="/ui/auth.html?tab=register" class="btn-register">Регистрация</a>
        `;
      }
    })();

    async function logout(e) {
      e.preventDefault();
      try {
        await fetch('/auth/logout', { method: 'POST' });
        window.location.reload();
      } catch (err) {
        alert('Ошибка выхода');
      }
    }
    
    async function logout(e) {
      e.preventDefault();
      const response = await fetch('/auth/logout', { method: 'POST' });
      if (response.ok) {
        window.location.reload();
      }
    }
  </script>
</body>
</html>
