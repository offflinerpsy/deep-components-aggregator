<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Deep Aggregator — Карточка товара</title>
  
  <!-- Design tokens first -->
  <link rel="stylesheet" href="/styles/tokens.css">
  <!-- Product card specific styles -->
  <link rel="stylesheet" href="/styles/card-detail.css">
  <!-- Legacy styles for compatibility -->
  <link rel="stylesheet" href="/ui/product.css">
</head>

<body>
  <!-- Header/Navigation -->
  <header style="position:sticky;top:0;backdrop-filter:saturate(1.2) blur(6px);background:rgba(250,250,250,.75);border-bottom:1px solid var(--color-border);z-index:var(--z-fixed);">
    <div style="display:flex;align-items:center;gap:16px;padding:14px 24px;max-width:1400px;margin:0 auto;">
      <a href="/" style="display:flex;align-items:center;gap:10px;font-weight:700;text-decoration:none;color:var(--color-text);">
        <div style="width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--color-primary),#0ea5e9);box-shadow:var(--shadow-sm);"></div>
        Deep Aggregator
      </a>
      <nav style="margin-left:auto;display:flex;align-items:center;gap:12px;">
        <a href="/" style="color:var(--color-text-muted);text-decoration:none;padding:8px 12px;border-radius:999px;">Главная</a>
        <a href="/search.html" style="color:var(--color-text-muted);text-decoration:none;padding:8px 12px;border-radius:999px;">Поиск</a>
        <a href="/ui/auth.html" style="color:var(--color-text-muted);text-decoration:none;padding:8px 12px;border-radius:999px;">Вход</a>
      </nav>
    </div>
  </header>

  <!-- Product Card Grid -->
  <div class="product-card">
    
    <!-- Left: Gallery (Compact) -->
    <aside class="product-gallery">
      <div class="product-gallery__main" id="gallery-main">
        <img id="main-image" alt="Изображение товара" loading="lazy" decoding="async">
      </div>
      <div class="product-gallery__thumbnails" id="gallery-thumbs"></div>
    </aside>

    <!-- Center: Main Content (Title, Description, Specs) -->
    <main class="product-main">
      <!-- Title & MPN -->
      <h1 id="product-title">Загрузка...</h1>
      <div class="mpn" id="product-mpn">—</div>

      <!-- Description -->
      <section class="specs-section">
        <h2 class="specs-section__title">Описание</h2>
        <p id="product-description" style="color:var(--color-text-muted);line-height:var(--line-height-relaxed);">Загрузка описания...</p>
      </section>

      <!-- Main Specifications -->
      <section class="specs-section">
        <h2 class="specs-section__title">Основные характеристики</h2>
        <dl class="specs-dl" id="specs-main">
          <dt>Производитель</dt><dd id="spec-manufacturer">—</dd>
          <dt>Корпус</dt><dd id="spec-package">—</dd>
          <dt>Упаковка</dt><dd id="spec-packaging">—</dd>
        </dl>
      </section>

      <!-- Technical Specifications -->
      <section class="specs-section">
        <h2 class="specs-section__title">Технические параметры</h2>
        <dl class="specs-dl" id="specs-technical">
          <dd style="grid-column:span 2;color:var(--color-text-muted);text-align:center;">Загрузка параметров...</dd>
        </dl>
      </section>
    </main>

    <!-- Right: Sticky Sidebar (Price, CTA, Docs) -->
    <aside class="product-aside">
      <!-- Price & Stock -->
      <div style="margin-bottom:var(--space-4);">
        <div style="font-size:var(--font-size-xs);color:var(--color-text-muted);margin-bottom:var(--space-1);">Мин. цена</div>
        <div id="product-price" style="font-size:var(--font-size-3xl);font-weight:var(--font-weight-bold);color:var(--color-text);">— ₽</div>
        <div id="product-stock" style="margin-top:var(--space-2);font-weight:var(--font-weight-semibold);color:var(--color-success);">—</div>
      </div>

      <!-- Quantity Filter -->
      <div class="qty-filter">
        <label class="qty-filter__label" for="qty-input">Ваше количество</label>
        <input class="qty-filter__input" id="qty-input" type="number" min="1" value="1" placeholder="Введите количество">
        <div class="qty-filter__chips">
          <span class="qty-filter__chip" data-qty="1">1</span>
          <span class="qty-filter__chip" data-qty="10">10</span>
          <span class="qty-filter__chip" data-qty="100">100</span>
          <span class="qty-filter__chip" data-qty="1000">1k</span>
          <span class="qty-filter__chip" data-qty="10000">10k</span>
        </div>
      </div>

      <!-- CTA Button -->
      <button class="cta-button" id="order-button">Заказать</button>

      <!-- Price Breaks (Compact) -->
      <div class="price-breaks">
        <div class="price-breaks__header">
          <span class="price-breaks__title">Цены от поставщиков</span>
        </div>
        <div class="price-breaks__grid" id="price-breaks-grid">
          <span style="grid-column:span 3;color:var(--color-text-muted);text-align:center;font-size:var(--font-size-xs);">Загрузка цен...</span>
        </div>
        <div class="price-breaks__show-all" id="show-all-prices">Показать все цены →</div>
      </div>

      <!-- Manufacturer -->
      <div class="docs-section">
        <div class="docs-section__title">Производитель</div>
        <div id="manufacturer-name" style="font-weight:var(--font-weight-semibold);color:var(--color-text);">—</div>
      </div>

      <!-- Documentation -->
      <div class="docs-section">
        <div class="docs-section__title">Документация</div>
        <div class="docs-section__links" id="docs-links">
          <span style="color:var(--color-text-muted);font-size:var(--font-size-xs);">Документы не найдены</span>
        </div>
      </div>
    </aside>

  </div>

  <!-- Gallery Overlay (Zoom) -->
  <div id="gallery-overlay" class="gallery-overlay" style="display:none;">
    <img id="overlay-image" class="gallery-overlay__image" alt="Увеличенное изображение">
  </div>

  <!-- Modal: All Prices -->
  <div id="prices-modal" class="modal-overlay" style="display:none;">
    <div class="modal">
      <div class="modal__header">
        <h2 class="modal__title">Все цены</h2>
        <button class="modal__close" id="prices-modal-close">&times;</button>
      </div>
      <div class="modal__body">
        <table class="price-table">
          <thead>
            <tr>
              <th>Поставщик</th>
              <th>Количество</th>
              <th>Цена за ед.</th>
              <th>Срок</th>
              <th>Мин. заказ</th>
            </tr>
          </thead>
          <tbody id="prices-modal-tbody">
            <tr>
              <td colspan="5" style="text-align:center;padding:var(--space-6);color:var(--color-text-muted);">Загрузка...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer style="color:var(--color-text-muted);padding:40px 24px;text-align:center;border-top:1px solid var(--color-border);margin-top:60px;">
    © 2025 Deep Components Aggregator
  </footer>

  <!-- Scripts -->
  <script src="/ui/product-v2.js"></script>
</body>
</html>
